<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MyMapper">
    <select id="selectRank" resultMap="rankItem">
        select t.USER_ID, t.total, USER.name as user_name
        from (select USER_ID, SUM(SCORE) as total from MATCH GROUP BY USER_ID ORDER BY total) t
             INNER JOIN USER
                        ON t.USER_ID = USER.ID
    </select>

    <resultMap id="rankItem" type="hello.entity.RankItem" >
        <!-- 常规属性映射 -->
        <result property="score" column="total" />
        <!-- 实体类映射 -->
        <association property="user" >
             <result property="id" column="user_id" />
             <result property="name" column="user_name" />
<!--             <result property="score" column="total" />-->
        </association>
    </resultMap>
</mapper>